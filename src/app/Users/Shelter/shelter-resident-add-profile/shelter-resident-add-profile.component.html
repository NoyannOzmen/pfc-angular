<main class="justify-self-stretch flex-1">
  <h2 class="font-grands text-3xl text-center my-2 pt-5">Mon espace association</h2>
  <div class="flex flex-col content-center justify-center mx-auto mb-4 w-[80%]">
    <app-dashboard-nav></app-dashboard-nav>
    <div class="flex flex-col bg-zoning rounded-lg">
      <app-resident-sub-nav></app-resident-sub-nav>
      <section class="flex flex-col justify-center content-center">
        <h3 class="hidden md:inline font-grands text-3xl text-center my-2 pt-5 w-full">Créer un profil animal</h3>

        <!--
        {userMessage &&
          <div>
            <p class="font-grands font-base text-accents1 text-center">{userMessage}</p>
          </div>
        }
        -->

        <form class="grid grid-cols-1 my-6 mx-6 justify-center lg:flex-none lg:mx-2 lg:grid lg:grid-cols-3 lg:px-2 xl:grid-cols-3 xl:p-10" [formGroup]="animalCreationForm">

          <fieldset class="flex flex-wrap justify-center content-start gap-x-4">

            <div class="mb-2 w-[90%]">
              <label for="nom_animal" class="block font-grands w-full font-bold text-base ">Nom</label>
              <input class="w-full rounded-md h-8 px-2 py-1 text-texte bg-fond " type="text" name="nom_animal" formControlName="nom_animal" id="nom_animal" required />
            </div>

            <div class="mb-2 w-[90%]">
              <label for="sexe_animal" class="block w-full font-grands font-bold text-base ">Sexe</label>
              <select name="sexe_animal" formControlName="sexe_animal" id="sexe_animal" class="custom-select w-full rounded-md h-8 px-2 py-1 text-texte bg-fond ">
                <option value="Inconnu">Inconnu</option>
                <option value="Mâle">Mâle</option>
                <option value="Femelle">Femelle</option>
              </select>
            </div>

            <div class="mb-2 w-[90%]">
              <label for="age_animal" class="block w-full font-grands font-bold text-base ">Age</label>
              <input class="w-full rounded-md h-8 px-2 py-1 text-texte bg-fond " type="number" name="age_animal" formControlName="age_animal" id="age_animal" required />
            </div>
          </fieldset>

          <hr class="border-t-accents2 w-1/3 border-t-2 border-solid justify-self-center my-4 md:hidden" />

          <fieldset class="flex flex-wrap justify-center content-start gap-x-4">

            <div class="mb-2 w-[90%] md:shrink md:grow-0 self-start">
              <label for="espece_animal" class="block w-full font-grands font-bold text-base ">Espèce</label>
              <select name="espece_animal" formControlName="espece_animal" id="espece_animal" class="custom-select w-full rounded-md h-8 px-2 py-1 text-texte bg-fond ">
                <option value="">Choisissez</option>
                  @for(espece of speciesList; track $index) {
                    <option value={{espece.id}} >{{ espece.nom }}</option>
                  }
              </select>
            </div>

            <div class="mb-2 w-[90%]">
              <label for="race_animal" class="block w-full font-grands font-bold text-base ">Race</label>
              <input class="w-full rounded-md h-8 px-2 py-1 text-texte bg-fond " type="text" name="race_animal" formControlName="race_animal" id="race_animal" />
            </div>
            <div class="mb-2 w-[90%]">
              <label for="couleur_animal" class="block w-full font-grands font-bold text-base ">Couleur</label>
              <input class="w-full rounded-md h-8 px-2 py-1 text-texte bg-fond " type="text" name="couleur_animal" formControlName="couleur_animal" id="couleur_animal"/>
            </div>
          </fieldset>

          <hr class="border-t-accents2 w-1/3 border-t-2 border-solid justify-self-center my-4 md:hidden" />

          <fieldset class="flex flex-wrap justify-center gap-x-4">

            <div class="mb-2 grow ">
              <label for="description_animal" class="block font-grands font-bold text-base w-full">Description</label>
              <input class="w-full rounded-md px-2 py-1 text-texte bg-fond" name="description_animal" formControlName="description_animal" id="description_animal" rows="3" />
            </div>

            <div class="mb-2 w-full">
              <p id="couleur-animal" class="block font-grands font-bold text-base mb-4 shrink">Tags</p>

              <fieldset name="tags-animal" id="tags-animal" class="grid grid-cols-1 md:grid-cols-2 gap-2 w-full px-2 py-1">
                @for(tag of tagList; track $index) {
                  <div class="flex gap-x-1.5 w-full">
                    <input (click)="addtoTagList(`${tag.id}`)" type="checkbox" id={{tag.id}} name={{tag.id}} value={{tag.id}} class="leading-3 size-6"/>
                    <label for={{tag.id}} class="block font-grands text-xs leading-3">{{ tag.nom }}</label>
                  </div>
                }
              </fieldset>

              <div class="flex justify-center">
                <button (click)="displayModal()" type="button" id="create-tag" class="self-center hover:bg-accents1-dark rounded-full hover:underline bg-accents1-light text-center font-grands text-fond font-semibold text-base py-0.5 px-4">Créer un tag</button>
              </div>
            </div>

          </fieldset>

          <hr class="border-t-accents2 w-1/3 border-t-2 border-solid justify-self-center my-4 md:hidden" />

          <fieldset class="flex flex-wrap justify-center w-full lg:col-start-2 lg:columns-2">
            <div class="">
              <input type="button" (click)="handleCreateAnimal()" value="Créer le profil" class="hover:bg-accents1-dark rounded-full hover:underline bg-accents1 text-center font-grands text-fond font-semibold text-xl py-2 px-6" />
            </div>
          </fieldset>

        </form>
      </section>
    </div>
  </div>

  <!-- Tag Creation Modal -->
  <div id="create-tags-modal" class="flex justify-center content-center fixed bg-texte/20 inset-0" [class.hidden]="isHidden">

    <div class="self-center bg-zoning p-6 rounded-lg">
      <div class="flex justify-between">
        <h3 class="font-grands text-lg font-extrabold mb-4">Ajouter un tag</h3>
        <span (click)="displayModal()" class="cancel material-symbols-outlined text-texte cursor-pointer">
          close
        </span>
      </div>
      <form id="create-tags-form" [formGroup]="tagCreationForm">

        <div class="mb-2">
          <label for="tag-name" class="block text-texte font-grands font-bold text-base ">Nom du Tag</label>
          <input class="w-56 rounded-md h-8 px-2 py-1 text-texte bg-fond " type="text" name="tag_nom" formControlName="nom" id="tag-nom" />
        </div>

        <div class="mb-4 ">
          <label for="tag-description" class="block text-texte font-grands font-bold text-base ">Description</label>
          <textarea class="w-56 rounded-md px-2 py-1 text-texte bg-fond" name="tag_description" formControlName="description" id="tag-description" rows="3"></textarea>
        </div>

        <div>
          <input class="cursor-pointer hover:bg-accents1-dark rounded-full hover:underline bg-accents1 text-center font-grands text-fond font-semibold text-base py-1 px-4" type="button" value="Valider" (click)="handleCreateTag()"/>
          <button (click)="displayModal()" class="hover:bg-accents2-dark rounded-full hover:underline bg-accents2-dark text-center font-grands text-fond font-semibold text-base py-1 px-4 cancel">Annuler</button>
        </div>
      </form>
    </div>
  </div>
</main>
